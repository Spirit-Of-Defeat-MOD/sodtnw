add_namespace = serbia

# Intro event
country_event = {
	id = serbia.1
    title = serbia.1.t
	desc = serbia.1.d
	picture = GFX_report_event_europe_funeral
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = serbia.1.a
	}
}

# Serbian Civil War
country_event = {
	id = serbia.2
	title = serbia.2.t
	desc = serbia.2.d
	picture = GFX_report_event_spain_civil_war_volunteers_02
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_global_flag = serbcw_over }
		tag = SER
		date > 1936.2.12
	}
	
	immediate = {
		hidden_effect = {
			create_country_leader = {
				name = "Dragoljub 'Draza' Mihailovic"
				desc = "POLITICS_DRAZA_MIHAILOVIC_DESC"
				picture = "Portrait_SER_Draza_Mihailovic.tga"
				expire = "1965.1.1"
				ideology = despotism
				traits = {
					#
				}
			}
			create_country_leader = {
				name = "Dragoljub 'Draza' Mihailovic"
				desc = "POLITICS_DRAZA_MIHAILOVIC_DESC"
				picture = "Portrait_SER_Draza_Mihailovic.tga"
				expire = "1965.1.1"
				ideology = utilitarian_despot_subtype
				traits = {
					#
				}
			}
			set_party_name = { 
				ideology = utilitarian_despot
				long_name = SER_chetnik_movement_party_long
				name = SER_chetnik_movement_party
			}
			set_party_name = { 
				ideology = neutrality
				long_name = SER_chetnik_movement_party_long
				name = SER_chetnik_movement_party
			}
		}
	}
	option = { # Support Chetniks
		name = serbia.2.a
		trigger = { is_ai = no }
		hidden_effect = {
			set_capital = 176
			start_civil_war = {
				ruling_party = utilitarian_despot
				ideology = communism
				size = 0.5
				states = { 105 107 764 807 833 }
			}
			random_other_country = {
				limit = {
					original_tag = SER
					has_government = communism
				}
				ai_focus_aggressive_factor = 0.25
				state_event = { id = serbia.3 days = 2 }
				state_event = { id = serbia.5 days = 1 }
				set_cosmetic_tag = SER_civil_war
				load_oob = "SER_Communist_Civil_War"
				add_manpower = 30000
				set_equipment_fraction = 0.5
				set_stability = 0.9
				set_war_support = 0.8
				set_popularities = {
					totalitarian_socialism = 10
					communism = 83
					revolutionary_socialism = 2
					democratic_socialism = 3
					social_democracy = 1
				}
				create_field_marshal = {
					name = "Sava Kovacevic"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 4
					attack_skill = 4
					defense_skill = 4
					planning_skill = 5
					logistics_skill = 5
				}
				create_corps_commander = {
					name = "Milovan Saranovic"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 3
					attack_skill = 3
					defense_skill = 3
					planning_skill = 2
					logistics_skill = 3
				}
				create_corps_commander = {
					name = "Koca Popovic"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 2
					attack_skill = 2
					defense_skill = 2
					planning_skill = 2
					logistics_skill = 2
				}
				create_corps_commander = {
					name = "Blazo Jovanovic"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 2
					attack_skill = 2
					defense_skill = 2
					planning_skill = 1
					logistics_skill = 1
				}
				create_corps_commander = {
					name = "Kosta Nadj"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 2
					logistics_skill = 1
				}
				create_corps_commander = {
					name = "Arso Jovanovic"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
				create_corps_commander = {
					name = "Peko Dapcevic"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
				create_corps_commander = {
					name = "Vladimir Smirnov"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
				create_corps_commander = {
					name = "Ivan Milutinovic"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
				create_corps_commander = {
					name = "Gojko Nikolis"
					portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
					traits = { }
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
			}
			news_event = { hours = 6 id = serbianews.1 }
			set_global_flag = serbian_civil_war
			load_oob = "SER_Chetnik_Civil_War"
			set_equipment_fraction = 0.5
			set_stability = 0.9
			set_war_support = 0.8
			create_field_marshal = {
				name = "Nikola Kalabic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 4
				attack_skill = 3
				defense_skill = 5
				planning_skill = 4
				logistics_skill = 4
			}
			create_corps_commander = {
				name = "Kosta Pecanac"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 3
				attack_skill = 3
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Zaharije Ostojic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Dragoslav Racic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Petar Bacovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 2
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Vojislav Lukacevic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 2
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Dragutin Keserovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Velimir Piletic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
			}
			set_popularities = {
				democratic = 1
				neutrality = 4
				utilitarian_despot = 89
				fascism = 6
			}
		}
		custom_effect_tooltip = chetniks_chosen
	}
	option = { # Support Communists
		name = serbia.2.b
		hidden_effect = {
			start_civil_war = {
				ruling_party = communism
				ideology = utilitarian_despot
				size = 0.5
				states = { 45 108 831 833 838 840 }
			}
			state_event = { id = serbia.3 days = 2 }
			state_event = { id = serbia.5 days = 1 }
			ai_focus_aggressive_factor = 0.25
			random_other_country = {
				limit = {
					original_tag = SER
					has_government = utilitarian_despot
				}
				set_cosmetic_tag = SER_civil_war
				load_oob = "SER_Chetnik_Civil_War"
				set_equipment_fraction = 0.5
				set_stability = 0.9
				set_war_support = 0.8
				set_popularities = {
					democratic = 1
					utilitarian_despot = 89
					neutrality = 4
					fascism = 6
				}
			create_field_marshal = {
				name = "Nikola Kalabic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 4
				attack_skill = 3
				defense_skill = 5
				planning_skill = 4
				logistics_skill = 4
			}
			create_corps_commander = {
				name = "Kosta Pecanac"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 3
				attack_skill = 3
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Zaharije Ostojic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Dragoslav Racic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Petar Bacovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 2
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Vojislav Lukacevic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 2
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Dragutin Keserovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Velimir Piletic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
			}
			}
			news_event = { hours = 6 id = serbianews.1 }
			set_global_flag = serbian_civil_war

			set_popularities = {
				totalitarian_socialism = 9
				communism = 84
				revolutionary_socialism = 1
				democratic_socialism = 5
				social_democracy = 1
			}
			load_oob = "SER_Communist_Civil_War"
			add_manpower = 30000
			set_equipment_fraction = 0.5
			set_stability = 0.9
			set_war_support = 0.8
			create_field_marshal = {
				name = "Sava Kovacevic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 4
				attack_skill = 4
				defense_skill = 4
				planning_skill = 5
				logistics_skill = 5
			}
			create_corps_commander = {
				name = "Milovan Saranovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 3
				attack_skill = 3
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 3
			}
			create_corps_commander = {
				name = "Koca Popovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Blazo Jovanovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Kosta Nadj"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 2
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Arso Jovanovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Peko Dapcevic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Vladimir Smirnov"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Ivan Milutinovic"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}	
			create_corps_commander = {
				name = "Gojko Nikolis"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_3.dds"
				traits = { }
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
			}
		}
		custom_effect_tooltip = communists_chosen
	}
}

# Serbian navy is captured!
country_event = {
	id = serbia.3
	title = serbia.3.t
	desc = serbia.3.d
	picture = GFX_report_event_destroyers
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = serbia.3.a
	}
}
# Montenegrin war of independence
country_event = {
	id = serbia.4
	title = serbia.4.t
	desc = serbia.4.d
	picture = GFX_report_event_destroyers
	
	trigger = {
		has_global_flag = chetniksercw_win
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	fire_only_once = yes
	
	option = {
		name = "Already?!"
		custom_effect_tooltip = montenegrin_cw_war
		hidden_effect = {
			if = {
				limit = {
					MNT = {
						is_puppet_of = SER
					}
				}
				end_puppet = MNT
			}
			release = MNT
			declare_war_on = {
				target = MNT
				type = annex_everything
			}
			MNT = {
				add_manpower = 30000
				army_experience = 50
				add_political_power = 150
				load_oob = "MNT_1936"
				set_war_support = 1
				add_command_power = 75
			}
		}
	}
}
# Soviets send equipment
country_event = {
	id = serbia.5
	title = serbia.5.t
	desc = serbia.5.d
	picture = GFX_report_event_destroyers
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = "Thanks!"
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 1750
			producer = SOV
		}
	}
}